import{_ as a,c as s,o as t,ae as n}from"./chunks/framework.DJWEhhqZ.js";const h=JSON.parse('{"title":"记录联合","description":"","frontmatter":{},"headers":[],"relativePath":"mysql/MySQL/记录联合.md","filePath":"mysql/MySQL/记录联合.md"}'),o={name:"mysql/MySQL/记录联合.md"};function i(l,e,p,d,c,r){return t(),s("div",null,[...e[0]||(e[0]=[n(`<h1 id="记录联合" tabindex="-1">记录联合 <a class="header-anchor" href="#记录联合" aria-label="Permalink to &quot;记录联合&quot;">​</a></h1><blockquote><p>将两个表的数据按照一定的查询条件查询出来后，将结果合并在一起显示，这个时候就需要用<code>union</code>和 <code>union all</code>关键字来实现这样的功能。</p></blockquote><p>UNION 用于合并两个或多个 SELECT 语句的结果集，并消去表中任何重复行。</p><p>UNION 内部的 SELECT 语句必须拥有相同数量的列，列也必须拥有相似的数据类型。</p><p>同时，每条 SELECT 语句中的列的顺序必须相同.</p><table tabindex="0"><thead><tr><th>类别</th><th>语法</th></tr></thead><tbody><tr><td>语法1</td><td>select语句1 union select语句2</td></tr><tr><td>语法2</td><td>select语句1 union all select语句2</td></tr></tbody></table><h2 id="union查询" tabindex="-1">Union查询 <a class="header-anchor" href="#union查询" aria-label="Permalink to &quot;Union查询&quot;">​</a></h2><p>Union查询就是把2条或多条sql的查询结果合并成1个结果集。</p><p>sql1返回N行，sql2返回M行 sql1 union sql2 返回N+M行</p><p>例1. 从goods表中获取到栏目3 和栏目4下的商品</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>select goods_id,goods_name,cat_id from goods where cat_id=3 union select goods_id,goods_name,cat_id from goods where cat_id=4</span></span></code></pre></div><p>例2. 用户表和临时表 tmp 查询现在user表和tmp表一共多少人？</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>select uid,name from user union select id,name from tmp</span></span></code></pre></div><p>union语句必须满足1个条件：各语句取出列数相同，如果不相同，会报错，列数不同如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>select uid,name,age from user union select id,name from tmp //报错</span></span></code></pre></div><p>列名未必要一致，查询出的结果列名称会使用第一条sql的列名称</p><p>例3. union查询a表和b表 返回的不是N+M行</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># a表4条数据  b表4条数据</span></span>
<span class="line"><span>select * from a union select * from b</span></span></code></pre></div><p>应该返回8条数据，但实际返回7条</p><blockquote><p>注意：使用union时，完全相等的行，将会被合并，合并是比较耗费时的操作，两行会在比较看是否完全相等，一般不让union进行合并，使用union all可以避免</p></blockquote><h2 id="union-all" tabindex="-1">Union all <a class="header-anchor" href="#union-all" aria-label="Permalink to &quot;Union all&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>select * from a union all select * from b</span></span></code></pre></div><p>返回8条数据</p><p>例4. union合并后得到的总结果集是可以排序的</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>select * from a union all select * from b order by num ase;</span></span></code></pre></div>`,25)])])}const b=a(o,[["render",i]]);export{h as __pageData,b as default};
