import{_ as s,o as a,c as e,O as l}from"./chunks/framework.1d9da8ae.js";const y=JSON.parse('{"title":"查询模型DQL","description":"","frontmatter":{},"headers":[],"relativePath":"mysql/MySQL/查询模型DQL.md","filePath":"mysql/MySQL/查询模型DQL.md"}'),o={name:"mysql/MySQL/查询模型DQL.md"},t=l(`<h1 id="查询模型dql" tabindex="-1">查询模型DQL <a class="header-anchor" href="#查询模型dql" aria-label="Permalink to &quot;查询模型DQL&quot;">​</a></h1><p>想要写出高难度的复杂查询，我们要专门讨论查询的模型问题，看我们是否真的理解select写出强大的查询语句，主要是靠查询模型。</p><blockquote><p>测试数据库下载： <a href="https://mysql.hnz.kim/test/testdb.sql" target="_blank" rel="noreferrer">testdb.sql</a></p></blockquote><h2 id="查询" tabindex="-1">查询 <a class="header-anchor" href="#查询" aria-label="Permalink to &quot;查询&quot;">​</a></h2><p>语法结构如下：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">SELECT</span></span>
<span class="line"><span style="color:#A6ACCD;">[字段1 [</span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">别名1</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">[</span><span style="color:#82AAFF;">函数</span><span style="color:#A6ACCD;">(字段2) </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">......</span><span style="color:#A6ACCD;">字段n]</span></span>
<span class="line"><span style="color:#A6ACCD;">FROM </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">表名</span></span>
<span class="line"><span style="color:#A6ACCD;">[WHERE where条件]</span></span>
<span class="line"><span style="color:#A6ACCD;">[GROUP BY 字段]</span></span>
<span class="line"><span style="color:#A6ACCD;">[HAVING where_contition]</span></span>
<span class="line"><span style="color:#A6ACCD;">[ORDER 条件]</span></span>
<span class="line"><span style="color:#A6ACCD;">[LIMIT 条件]</span></span></code></pre></div><table><thead><tr><th>序号</th><th>查询</th><th>select</th><th>介绍</th></tr></thead><tbody><tr><td>1</td><td>条件</td><td>where</td><td>条件表达式为真，则取出改行 <br>1.比较运算符= ,!=, &lt;, &lt;=, &gt;, &gt;=,<br> 2. 逻辑运算符 and or <br>3. like，not like (%匹配任意多个字符，_匹配任意单个字符)，<br>in,not in,between and<br> 4. is null ,is not null</td></tr><tr><td>2</td><td>分组</td><td>group by</td><td>一般配合5个聚合函数使用 max(求最大值),min(求最小值),sum(求和),avg(求平均值),count(计算行数)</td></tr><tr><td>3</td><td>筛选</td><td>having</td><td>用于对<code>where</code>和<code>group by</code>查询出来的结果集进行过滤，查出满足条件的结果集。它是一个过滤声明，是在查询返回结果集以后对查询结果进行的过滤操作。</td></tr><tr><td>4</td><td>排序</td><td>orderby</td><td>排序是按照某个属性来排的，在数据库中是按照某个列来排的，那有正序也有倒序</td></tr><tr><td>5</td><td>限制</td><td>limit</td><td>限制取出条目</td></tr></tbody></table><h2 id="列可计算" tabindex="-1">列可计算 <a class="header-anchor" href="#列可计算" aria-label="Permalink to &quot;列可计算&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select * from users where id = 2;</span></span></code></pre></div><p>为什么取出的是第二行？</p><ol><li><p>列是变量 每一行的列值在变，从上到下遍历，where是表达式,当值为真则取出该行。(表达式为真取出，为假不取)</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> from users where </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//取出所有行</span></span>
<span class="line"><span style="color:#A6ACCD;">select </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> from users where </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//一行都没取出来</span></span></code></pre></div></li><li><p>变量是可以计算的 计算存储人员明年多少岁？</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select name</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">age</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> from users</span><span style="color:#89DDFF;">;</span></span></code></pre></div></li><li><p>查询本店的商品比市场价格便宜多少？</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">shop_price</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">market_price</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">market_price</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">shop_price from goods</span><span style="color:#89DDFF;">;</span></span></code></pre></div></li></ol><h2 id="where条件查询" tabindex="-1">WHERE条件查询 <a class="header-anchor" href="#where条件查询" aria-label="Permalink to &quot;WHERE条件查询&quot;">​</a></h2><p>数据库中常用的是where关键字，用于在初始表中筛选查询。它是一个约束声明，用于约束数据，在返回结果集之前起作用。</p><table><thead><tr><th>类别</th><th>详细解释</th></tr></thead><tbody><tr><td>基本语法</td><td>select 字段 from 表 where where条件;</td></tr></tbody></table><ol><li><p>主键为32的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select * from goods where goods_id=32;</span></span></code></pre></div></li><li><p>不属于第3个栏目的所有商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select * from goods where cat_id!=3;</span></span></code></pre></div></li><li><p>本店价格高于3000的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select * from goods where shop_price&gt;3000;</span></span></code></pre></div></li><li><p>本店价格低于或等于100的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name,shop_price, from goods where shop_price&lt;=100;</span></span></code></pre></div></li><li><p>取出第4个栏目或第11个栏目</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name,cat_id from goods where cat_id=3 or cat_id=11;</span></span></code></pre></div></li><li><p>取出100&lt;=价格&lt;=500的商品 shop_price&gt;=100 and shop_price&lt;=500</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name,cat_id,shop_price from goods where shop_price&gt;=100 and shop_price&lt;=500;</span></span></code></pre></div><p>between 100 and 500</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name,cat_id,shop_price from goods where shop_price between 100 and 500;</span></span></code></pre></div></li><li><p>取出不属于第3个栏目，且不属于第11个栏目的商品(and 或 not in 分别实现)</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name,cat_id from goods where catid!=3 and cat_id!=11;</span></span>
<span class="line"><span style="color:#A6ACCD;">select goods_name,cat_id from goods where cat_id not in (3,11);</span></span></code></pre></div></li><li><p>取出第3个栏目下价格&lt;1000或&gt;3000并且点击量&gt;5的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name,cat_id,goods_id,shop_price,click_count from goods where cat_id=3 and (shop_price&lt;1000 or shop_price&gt;3000) and click_count&gt;5;</span></span></code></pre></div></li><li><p>取出价格大于100且小于300,或大于4000且小于5000的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name,cat_id,goods_id,shop_price from goods (shop_price&gt;100 and shop_price&lt;300) or (shop_price&gt;4000 and shop_price&lt;5000);</span></span></code></pre></div></li><li><p>取出名字以‘诺基亚’开头的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name from goods where goods_name like &quot;诺基亚%&quot;;</span></span></code></pre></div></li><li><p>取出名字为“诺基亚Nxx”的手机</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name from goods where goods_name like &quot;诺基亚N__&quot;;</span></span></code></pre></div></li><li><p>取出名字不以‘诺基亚’开头的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name from goods where goods_name not like &quot;诺基亚%&quot;;</span></span></code></pre></div></li><li><p>取出第3个栏目下面价格在1000到3000之间，并且点击量&gt;5&quot;诺基亚&quot;开头商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name,shop_price,click_count from goods where cat_id=3 and click_count&gt;5 and goods_name like &quot;诺基亚%&quot;;</span></span></code></pre></div></li><li><p>把goods表中的商品名为&quot;诺基亚xxx&quot;的商品改为&quot;HTCxxx&quot; 提示：把列看成变量，参与运算，甚至调用函数来处理</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name from goods where goods_name like &quot;诺基亚%&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;">select concat(&#39;HTC&#39;,substring(goods_name,4)) from goods where goods_name like &quot;诺基亚%&quot;;</span></span></code></pre></div></li></ol><p><a href="http://www.runoob.com/mysql/mysql-functions.html" target="_blank" rel="noreferrer">Mysql常用函数列表</a></p><table><thead><tr><th>函数名</th><th>描述</th></tr></thead><tbody><tr><td>substring(str,pos,len)</td><td>截取指定位置，指定长度字符</td></tr><tr><td>concat(str,str,str,...)</td><td>连接字符串</td></tr></tbody></table><h2 id="groupby分组查询与统计函数" tabindex="-1">GROUPBY分组查询与统计函数 <a class="header-anchor" href="#groupby分组查询与统计函数" aria-label="Permalink to &quot;GROUPBY分组查询与统计函数&quot;">​</a></h2><h3 id="统计函数" tabindex="-1">统计函数 <a class="header-anchor" href="#统计函数" aria-label="Permalink to &quot;统计函数&quot;">​</a></h3><ol><li>如果我们想知道总用户数怎么办？</li><li>查询谁是数据表里的首富怎么办？</li><li>如果我们想知道用户的平均金额怎么办？</li><li>如果我们想知道所有用户的总金额怎么办？</li></ol><table><thead><tr><th>函数名</th><th>作用</th></tr></thead><tbody><tr><td>count()</td><td>计算行数</td></tr><tr><td>avg()</td><td>求平均值</td></tr><tr><td>sum()</td><td>求和</td></tr><tr><td>min()</td><td>求最小值</td></tr><tr><td>max()</td><td>求最大值</td></tr></tbody></table><table><thead><tr><th>类别</th><th>详细解释</th></tr></thead><tbody><tr><td>基本语法</td><td>select 函数(字段) from 表</td></tr></tbody></table><p>示例：</p><ol><li><p>查询所有商品的平均价格</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select avg(shop_price) from goods;</span></span></code></pre></div></li><li><p>查询最贵的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select max(shop_price) from goods;</span></span></code></pre></div></li><li><p>查询最便宜的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select min(shop_price) from goods;</span></span></code></pre></div></li><li><p>查询一共有多少种商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select count(*) from goods;</span></span></code></pre></div></li><li><p>查询商品的总价格</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select sum(shop_price) as allsum from goods;</span></span></code></pre></div></li><li><p>查询本店积压的商品总货款</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select </span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(shop_price</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">goods_number) </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">goods</span><span style="color:#89DDFF;">;</span></span></code></pre></div></li></ol><h3 id="groupby分组查询" tabindex="-1">GROUPBY分组查询 <a class="header-anchor" href="#groupby分组查询" aria-label="Permalink to &quot;GROUPBY分组查询&quot;">​</a></h3><p>GROUP BY 语句根据一个或多个列对SELECT结果集进行分组。</p><table><thead><tr><th>类别</th><th>详细解释</th></tr></thead><tbody><tr><td>基本语法</td><td>select * from 表 group by 字段</td></tr></tbody></table><ol><li><p>统计每个栏目下商品的平均价格</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(shop_price) </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">avg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> cat_id from goods group by cat_id</span><span style="color:#89DDFF;">;</span></span></code></pre></div></li><li><p>查询每个栏目下有多少种商品</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(shop_price) </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">avg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> cat_id from goods group by cat_id</span><span style="color:#89DDFF;">;</span></span></code></pre></div></li><li><p>查询每个栏目下最贵的商品</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select </span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(shop_price)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">cat_id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">goods_name from goods group by cat_id</span><span style="color:#89DDFF;">;</span></span></code></pre></div></li><li><p>查询每个栏目下商品库存量</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select </span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(goods_number)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">cat_id from goods group by cat_id</span><span style="color:#89DDFF;">;</span></span></code></pre></div></li></ol><h2 id="having-筛选" tabindex="-1">HAVING 筛选 <a class="header-anchor" href="#having-筛选" aria-label="Permalink to &quot;HAVING 筛选&quot;">​</a></h2><p>用于对<code>where</code>和<code>group by</code>查询出来的结果集进行过滤，查出满足条件的结果集。它是一个过滤声明，是在查询返回结果集以后对查询结果再次进行的过滤操作。</p><table><thead><tr><th>类别</th><th>详细解释</th></tr></thead><tbody><tr><td>基本语法</td><td>select * from 表 group by 字段 having 条件</td></tr><tr><td>基本语法</td><td>select * from 表 where 字段 having 条件</td></tr><tr><td>基本语法</td><td>select * from 表 having 条件</td></tr></tbody></table><p>where条件筛选的是磁盘上的表的字段，而sheng是结果集上的字段，结果集查出来的是临时放在内存里的，我们需要筛选结果集上的字段，我们可以将结果集当成表，进一步筛选，只不过不能用where需要用having， where 发挥的比较早，是针对磁盘上的表发挥作用，筛选出结果集</p><p>从结果集中进一步筛选需要用having，where与having同时存在，where要放到having前面</p><h2 id="orderby排序" tabindex="-1">orderby排序 <a class="header-anchor" href="#orderby排序" aria-label="Permalink to &quot;orderby排序&quot;">​</a></h2><p>排序是按照某个属性来排的，在数据库中是按照某个列来排的，那有正序也有倒序。</p><table><thead><tr><th>类别</th><th>详细解释</th></tr></thead><tbody><tr><td>基本语法</td><td>select 字段 from 表 order by 字段1 desc/asc,字段n desc/asc</td></tr></tbody></table><p>排序用到的关键词：</p><table><thead><tr><th>关键词</th><th>说明</th></tr></thead><tbody><tr><td>asc</td><td>升序排列，从小到大（默认）</td></tr><tr><td>desc</td><td>降序排列，从大到小</td></tr></tbody></table><h2 id="limit-限制取出条数" tabindex="-1">limit 限制取出条数 <a class="header-anchor" href="#limit-限制取出条数" aria-label="Permalink to &quot;limit 限制取出条数&quot;">​</a></h2><p>order by一般和limit配合使用功能才会更强大</p><table><thead><tr><th>类别</th><th>详细解释</th></tr></thead><tbody><tr><td>语法1</td><td>select 字段 from 表 order by 字段 关键词 limit 数量</td></tr><tr><td>语法2</td><td>select 字段 from 表 order by 字段 关键词 limit offset,n</td></tr></tbody></table><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">limit n         //限制取出条目</span></span>
<span class="line"><span style="color:#A6ACCD;">limit offset,n  //跳过offset条,取出n条</span></span></code></pre></div><p>示例</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">limit 3   //取出0~ 3   </span></span>
<span class="line"><span style="color:#A6ACCD;">limit 10  //取出0~10</span></span></code></pre></div><p>取出前3</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">limit 0,3;</span></span></code></pre></div><p>取出前3到前5</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">limit 2,3;</span></span></code></pre></div><ol><li><p>取出价格最高的前三名商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name,shop_price from goods order by shop_price desc limit 0,3;</span></span></code></pre></div></li><li><p>取出点击量前3到前5名的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_name,goods_id,click_count from goods order by click_count desc limit 2,3;</span></span></code></pre></div></li><li><p>取出最新的一个商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name from goods order by goods_id desc limit 1;</span></span></code></pre></div></li><li><p>取出最新的3个商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name from goods order by goods_id desc limit 3;</span></span></code></pre></div></li></ol><p>使用limit做分页 假设每页显示5条，第一页取出最新5篇 limit 0,5 第二页取出5篇 limit 5,5 第三页取出5篇 limit 10,5 第n页取出的文章 limit (n-1)*5,5</p><h2 id="子句的查询" tabindex="-1">子句的查询 <a class="header-anchor" href="#子句的查询" aria-label="Permalink to &quot;子句的查询&quot;">​</a></h2><p>查询每个栏目下最新的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select max(goods_id),goods_name,cat_id from goods group by cat_id;</span></span></code></pre></div><p>取出的每行内容是不正确的，goods_id是正确，但是对应的goods_name不正确，它取出来的是按照cat_id分组排序后，第一个出现行的goods_name</p><h3 id="子句查询是有顺序的" tabindex="-1">子句查询是有顺序的 <a class="header-anchor" href="#子句查询是有顺序的" aria-label="Permalink to &quot;子句查询是有顺序的&quot;">​</a></h3><p>5种子句是有严格的顺序：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">where , group by , having , order by , limit</span></span></code></pre></div><h3 id="where型子查询" tabindex="-1">where型子查询 <a class="header-anchor" href="#where型子查询" aria-label="Permalink to &quot;where型子查询&quot;">​</a></h3><p>内层的select查询结果放在了外层的查询条件里面，这种查询叫做where型子查询。</p><ol><li>查询最新的商品，以goods_id最大为最新:</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name from goods order by goods_id desc limit 1;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 不用order by如何获取？</span></span>
<span class="line"><span style="color:#A6ACCD;"># 通过最大id获取最商品</span></span>
<span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name from goods where goods_id=32</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 查询最新商品的id(始终得到最大的goods_id)</span></span>
<span class="line"><span style="color:#A6ACCD;">select max(goods_id) from goods</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 合并后语句</span></span>
<span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name from goods where goods_id=(select max(goods_id) from goods)</span></span></code></pre></div><ol><li>查询每个栏目下最新的商品</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># 分组查询每个栏目下最大的goods_id</span></span>
<span class="line"><span style="color:#A6ACCD;">select max(goods_id) from goods group by cat_id</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 合并后语句</span></span>
<span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name,shop_price from goods where goods_id in (select max(goods_id) from goods group by cat_id)</span></span></code></pre></div><h3 id="from型子查询" tabindex="-1">from型子查询 <a class="header-anchor" href="#from型子查询" aria-label="Permalink to &quot;from型子查询&quot;">​</a></h3><p>先select查询出结果看作一张表，起一个别名，再在外层select这张临时表中的内容，对于外层的select 5种子句依旧可以使用。</p><ol><li><p>找到商品ID在20到25之间的所有商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name from goods where goods_id between 20 and 25</span></span></code></pre></div></li><li><p>找到商品ID在20到25之间的并且价格大于3000的商品</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select goods_id,goods_name,shop_price from (select goods_id,goods_name,shop_price from goods where goods_id between 20 and 25) as tmp where shop_price&gt;3000</span></span></code></pre></div></li></ol>`,66),n=[t];function p(c,i,r,d,h,g){return a(),e("div",null,n)}const m=s(o,[["render",p]]);export{y as __pageData,m as default};
