import{_ as e,c as d,o,a as r}from"./app.493ac1e4.js";const f=JSON.parse('{"title":"nodejs如何开启多进程，进程如何通讯","description":"","frontmatter":{},"headers":[{"level":2,"title":"进程 process 和线程 thread的区别","slug":"进程-process-和线程-thread的区别","link":"#进程-process-和线程-thread的区别","children":[{"level":3,"title":"进程","slug":"进程","link":"#进程","children":[]},{"level":3,"title":"线程","slug":"线程","link":"#线程","children":[]}]},{"level":2,"title":"为何需要多进程","slug":"为何需要多进程","link":"#为何需要多进程","children":[]},{"level":2,"title":"nodejs如何开启多进程，进程如何通讯","slug":"nodejs如何开启多进程-进程如何通讯-1","link":"#nodejs如何开启多进程-进程如何通讯-1","children":[]}],"relativePath":"interview/知识深度-原理和源码/06-nodejs如何开启多进程-进程如何通讯.md"}'),i={name:"interview/知识深度-原理和源码/06-nodejs如何开启多进程-进程如何通讯.md"},l=r('<h1 id="nodejs如何开启多进程-进程如何通讯" tabindex="-1">nodejs如何开启多进程，进程如何通讯 <a class="header-anchor" href="#nodejs如何开启多进程-进程如何通讯" aria-hidden="true">#</a></h1><h2 id="进程-process-和线程-thread的区别" tabindex="-1">进程 process 和线程 thread的区别 <a class="header-anchor" href="#进程-process-和线程-thread的区别" aria-hidden="true">#</a></h2><ul><li>进程，OS(操作系统)进行资源分配和调度的最小单位，有独立内存空间</li><li>线程，OS进行运算调度的最小单位，共享进程内存空间</li><li>一个进程可以包含多个线程</li><li>JS 是单线程的，但可以开启多进程执行，如 <code>WebWorker</code></li></ul><h3 id="进程" tabindex="-1">进程 <a class="header-anchor" href="#进程" aria-hidden="true">#</a></h3><blockquote><p>进程，是操作系统进行资源调度和分配的基本单位，每个进程都拥有自己独立的内存区域（参考“堆栈模型”）。</p></blockquote><p>一个进程<strong>无法直接访问</strong>另一个进程的内存数据，除非通过合法的进程通讯。</p><p>执行一个 nodejs 文件，即开启了一个进程，可以通过 <code>process.pid</code> 查看进程 id 。</p><h3 id="线程" tabindex="-1">线程 <a class="header-anchor" href="#线程" aria-hidden="true">#</a></h3><blockquote><p>线程，是操作系统进行运算调度的最小单位，线程是附属于进程的。一个进程可以包含多个线程（至少一个），多线程之间可共用进程的内存数据。<br> 如操作系统是一个工厂，进程就是一个车间，线程就是一个一个的工人。</p></blockquote><p><strong>JS 是单线程的</strong>，即执行 JS 时启动一个进程（如 JS 引擎，nodejs 等），然后其中再开启一个线程来执行。<br> 虽然单线程，JS 是基于事件驱动的，它不会阻塞执行，适合高并发的场景。</p><h2 id="为何需要多进程" tabindex="-1">为何需要多进程 <a class="header-anchor" href="#为何需要多进程" aria-hidden="true">#</a></h2><ul><li>多核CPU，更适合处理多进程</li><li>内存较大，多个进程才能更好的利用(单进程有内存上限)</li><li>总之，“压榨”机器资源，更快，更节省</li></ul><p>现代服务器都是多核 CPU ，适合同时处理多进程。即，一个进程无法充分利用 CPU 性能，进程数要等于 CPU 核数。</p><p>服务器一般内存比较大，但操作系统对于一个进程的内存分配是有上限的（2G），所以多进程才能充分利用服务器内存。</p><h2 id="nodejs如何开启多进程-进程如何通讯-1" tabindex="-1">nodejs如何开启多进程，进程如何通讯 <a class="header-anchor" href="#nodejs如何开启多进程-进程如何通讯-1" aria-hidden="true">#</a></h2><ul><li><code>child_process.fork</code> 可开启子进程执行单独的计算 <ul><li><code>fork(&#39;xxx.js&#39;)</code> 开启一个子进程</li></ul></li><li><code>cluster.fork</code> 可针对当前代码，开启多个进程来执行</li><li><strong>进程通讯</strong>：使用 <code>send</code> 发送信息，使用 <code>on</code></li></ul>',16),s=[l];function a(t,n,c,h,_,p){return o(),d("div",null,s)}const j=e(i,[["render",a]]);export{f as __pageData,j as default};
