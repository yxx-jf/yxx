import{_ as s,o as a,c as o,O as n}from"./chunks/framework.1d9da8ae.js";const C=JSON.parse('{"title":"类型判断","description":"","frontmatter":{},"headers":[],"relativePath":"interview/编写高质量代码/03-类型判断.md","filePath":"interview/编写高质量代码/03-类型判断.md"}'),l={name:"interview/编写高质量代码/03-类型判断.md"},e=n(`<h1 id="类型判断" tabindex="-1">类型判断 <a class="header-anchor" href="#类型判断" aria-label="Permalink to &quot;类型判断&quot;">​</a></h1><h2 id="题目" tabindex="-1">题目 <a class="header-anchor" href="#题目" aria-label="Permalink to &quot;题目&quot;">​</a></h2><p>实现一个 <code>getType</code> 函数，传入一个变量，能准确的获取它的类型。 如 <code>number</code> <code>string</code> <code>function</code> <code>object</code> <code>array</code> <code>map</code> <code>regexp</code> 等。</p><h2 id="类型判断-1" tabindex="-1">类型判断 <a class="header-anchor" href="#类型判断-1" aria-label="Permalink to &quot;类型判断&quot;">​</a></h2><p>常规的类型判断一般用 <code>typeof</code> 和 <code>instanceof</code> ，但这俩也有一些缺点</p><ul><li><code>typeof</code> 无法继续区分 <code>object</code> 类型</li><li><code>instanceof</code> 需要知道构造函数，即需要两个输入</li></ul><h2 id="枚举不是好方法" tabindex="-1">枚举不是好方法 <a class="header-anchor" href="#枚举不是好方法" aria-label="Permalink to &quot;枚举不是好方法&quot;">​</a></h2><p>你可能觉得 <code>typeof</code> 和 <code>instanceof</code> 结合起来可以判断，枚举所有的类型。<br> 这并不是一个好方法，因为<strong>手动枚举是不靠谱的</strong>，不具备完整性。<br> 第一，你有可能忽略某些类型，如；第二，ES 有会继续增加新的类型，如 <code>Symbol</code> <code>BigInt</code></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getType</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">array</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">instance</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">of</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Map</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">map</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 继续枚举...</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="使用-object-prototype-tostring" tabindex="-1">使用 <code>Object.prototype.toString</code> <a class="header-anchor" href="#使用-object-prototype-tostring" aria-label="Permalink to &quot;使用 \`Object.prototype.toString\`&quot;">​</a></h2><p>注意，必须用 <code>Object.prototype.toString</code> ，不可以直接用 <code>toString</code>。后者可能是子类重写的。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;font-style:italic;">// &#39;1,2&#39; （ 这样使用的其实是 Array.prototype.toString ）</span></span>
<span class="line"><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toString</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">]) </span><span style="color:#676E95;font-style:italic;">// &#39;[object Array]&#39;</span></span></code></pre></div><p>代码参考 get-type.ts</p>`,13),p=[e];function t(c,r,y,i,F,D){return a(),o("div",null,p)}const A=s(l,[["render",t]]);export{C as __pageData,A as default};
